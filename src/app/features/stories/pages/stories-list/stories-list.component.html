<section dir="rtl" class="mx-auto max-w-[1100px] px-3 md:px-6 py-6">
  <!-- Header -->
  <header class="rounded-3xl border border-black/5 shadow-sm overflow-hidden bg-white">
    <div class="p-5 md:p-8 bg-gradient-to-l from-emerald-500/10 via-white to-sky-500/10">
      <div class="flex items-start justify-between gap-3 flex-wrap">
        <div>
          <h1 class="m-0 text-[24px] md:text-[34px] font-extrabold text-stone-900">
            قصص ملهمة
          </h1>
          <p class="mt-2 mb-0 text-slate-700/80 font-bold leading-7 max-w-[800px]">
            مجموعة مختارة من القصص بملخص سريع — اضغطي على أي قصة لمشاهدة التفاصيل.
          </p>
        </div>

        <div class="inline-flex items-center gap-2 rounded-2xl border border-black/10 bg-white/70 px-4 py-2">
          <i class="pi pi-book text-emerald-700"></i>
          <span class="font-extrabold text-stone-900">
            {{ total }} قصة
          </span>
        </div>
      </div>
    </div>
  </header>

  <!-- Loading -->
  <div *ngIf="loading" class="mt-4 rounded-3xl bg-white border border-black/5 shadow-sm p-6">
    <div class="flex items-center gap-3">
      <i class="pi pi-spin pi-spinner text-slate-600"></i>
      <div class="font-extrabold text-stone-900">جاري تحميل القصص...</div>
    </div>
  </div>

  <!-- Empty -->
  <div *ngIf="!loading && !items?.length" class="mt-4 rounded-3xl bg-white border border-black/5 shadow-sm p-6">
    <div class="font-extrabold text-stone-900">لا توجد قصص حالياً.</div>
    <div class="mt-1 text-slate-700/80 font-semibold">جرّبي مرة أخرى لاحقًا.</div>
  </div>

  <!-- Grid -->
  <div *ngIf="!loading && items?.length" class="mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3">
    <a
      *ngFor="let s of items; trackBy: trackById"
      class="group block rounded-3xl overflow-hidden border border-black/5 bg-white shadow-sm
             hover:shadow-[0_20px_40px_rgba(0,0,0,.12)] transition-all duration-200
             hover:-translate-y-0.5 no-underline"
 class="mt-4" [routerLink]="['/stories/story', s.id]"
    >
      <!-- cover -->
      <div class="relative">
        <img
          [src]="s.coverImageUrl ? s.coverImageUrl : 'assets/stories/story1.jpg'"
          alt="cover"
          class="w-full h-[170px] object-cover"
          onerror="this.src='assets/stories/story1.jpg'"
        />

        <!-- soft dark pastel overlay -->
        <div class="absolute inset-0 bg-gradient-to-t from-slate-950/35 via-slate-950/10 to-transparent"></div>

        <!-- domain badge -->
        <div class="absolute top-3 right-3">
          <span class="inline-flex items-center gap-2 rounded-full px-3 py-1.5 text-[12px] font-extrabold
                       bg-white/85 border border-black/10 text-stone-900">
            <span class="w-2 h-2 rounded-full bg-emerald-500/70"></span>
            {{ s.domain }}
          </span>
        </div>
      </div>

      <!-- body -->
      <div class="p-4">
        <div class="flex items-start justify-between gap-2">
          <h3 class="m-0   " style="color:  #1f4f46;font-size: 18px;font-weight: 800;">
            {{ s.title }}
          </h3>

          <span
            class="shrink-0 w-9 h-9 rounded-2xl grid place-items-center
                   border border-black/10 bg-slate-900/[0.03]
                   text-stone-900 group-hover:bg-slate-900/[0.06] transition"
            aria-hidden="true"
          >
            <i class="pi pi-arrow-left"></i>
          </span>
        </div>

        <!-- <div class="mt-2 text-slate-700/85 font-bold">
          {{ s.personName }}
        </div> -->

        <p class="mt-2 mb-0 text-slate-800/80 font-semibold leading-7 line-clamp-3">
          {{ s.highlight }}
        </p>

        <a *ngIf="s?.id" class="mt-4" [routerLink]="['/stories/story', s.id]">
          <span
            class="inline-flex items-center gap-2 rounded-2xl px-3 py-2 text-[13px] font-extrabold
                   bg-gradient-to-l from-emerald-500/15 via-white to-sky-500/15
                   border border-black/10 text-stone-900"
          >
            اقرأ القصة
            <i class="pi pi-angle-left"></i>
          </span>
        </a>
      </div>
    </a>
  </div>

  <!-- Pagination -->
  <div *ngIf="!loading && totalPages > 1" class="mt-5">
    <div class="rounded-3xl bg-white border border-black/5 shadow-sm p-4">
      <div class="flex items-center justify-between gap-3 flex-wrap">
        <div class="text-slate-700/80 font-bold">
          صفحة <span class="text-stone-900 font-extrabold">{{ page }}</span>
          من <span class="text-stone-900 font-extrabold">{{ totalPages }}</span>
        </div>

        <div class="flex items-center gap-2">
          <button
            type="button"
            (click)="prev()"
            [disabled]="page === 1"
            class="px-3 py-2 rounded-2xl border border-black/10 bg-slate-900/[0.03]
                   font-extrabold text-stone-900 disabled:opacity-40 disabled:cursor-not-allowed"
          >
            السابق
          </button>

          <button
            *ngFor="let p of pageNumbers"
            type="button"
            (click)="goTo(p)"
            class="w-10 h-10 rounded-2xl border border-black/10 font-extrabold"
            [ngClass]="p === page
              ? 'bg-slate-900 text-white'
              : 'bg-white text-stone-900 hover:bg-slate-900/[0.05]'"
          >
            {{ p }}
          </button>

          <button
            type="button"
            (click)="next()"
            [disabled]="page === totalPages"
            class="px-3 py-2 rounded-2xl border border-black/10 bg-slate-900/[0.03]
                   font-extrabold text-stone-900 disabled:opacity-40 disabled:cursor-not-allowed"
          >
            التالي
          </button>
        </div>
      </div>
    </div>
  </div>
</section>
