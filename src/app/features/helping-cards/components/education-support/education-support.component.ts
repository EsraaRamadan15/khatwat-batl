import { Component } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';

type TabKey = 'programs' | 'visual' | 'apps' | 'sensory' | 'comm' | 'strength';

type CardItem = {
  name: string;
  desc?: string;
  tag?: string;
  points?: string[];
  icon: string;
};

type StrengthSection = {
  title: string;
  icon: string;
  items: string[];
};

@Component({
  selector: 'app-education-support',
  standalone: true,
  imports: [CommonModule, FormsModule],
  templateUrl: './education-support.component.html',
})
export class EducationSupportComponent {
  search = '';
  activeTab: TabKey = 'programs';

  tabs: { key: TabKey; label: string; icon: string }[] = [
    { key: 'programs', label: 'ุงูุจุฑุงูุฌ', icon: 'pi pi-bolt' },
    { key: 'visual', label: 'ุจุตุฑู ูุชูุธููู', icon: 'pi pi-eye' },
    { key: 'apps', label: 'ุชุทุจููุงุช', icon: 'pi pi-mobile' },
    { key: 'sensory', label: 'ุญุณูู ูุญุฑูู', icon: 'pi pi-sliders-h' },
    { key: 'comm', label: 'ุชูุงุตู', icon: 'pi pi-comments' },
    { key: 'strength', label: 'ููุงุท ุงูููุฉ', icon: 'pi pi-star' },
  ];

  // โ 1) ุงูุจุฑุงูุฌ ุงูุชุนููููุฉ
  programs: CardItem[] = [
    {
      name: 'See and Learn',
      tag: 'ุฃูุดุทุฉ ุจุตุฑูุฉ ููุธููุฉ',
      icon: 'pi pi-images',
      points: [
        'ูุฑููุฒ ุนูู ุงูููุงู ูุงููุบุฉ ูุงููุฑุงุกุฉ ูุงูุฐุงูุฑุฉ ูููุงุฑุงุช ุงูุฃุฑูุงู.',
        'ูุนุชูุฏ ุนูู ุชุนุฒูุฒ ููุงุท ุงูููุฉ ุงูุจุตุฑูุฉ.',
      ],
    },
    {
      name: 'Numicon',
      tag: 'ุฑูุงุถูุงุช ูุชุนุฏุฏุฉ ุงูุญูุงุณ',
      icon: 'pi pi-calculator',
      points: [
        'ููุซู ุงูุฃุฑูุงู ุนุจุฑ ูุญุณูุณุงุช ูุฃุดูุงู ููุฒูุงุฆูุฉ.',
        'ูุณุงุนุฏ ุงูุทูู ุนูู ุชุตูุฑ ุงูุฃููุงุท ุงูุฑูุงุถูุฉ.',
      ],
    },
    {
      name: 'POPS Resources',
      tag: 'ุฏุนู ุงููุทู ุนุจุฑ ุฑุณูู ุชูุถูุญูุฉ',
      icon: 'pi pi-book',
      points: [
        'ููุงุณุจ ูุตุนูุจุงุช ุงููุทู.',
        'ูุนุชูุฏ ุนูู ุฑุณูู ูุงุถุญุฉ ูุจุณูุทุฉ.',
      ],
    },
  ];

  // โ 2) ุฃุฏูุงุช ุจุตุฑูุฉ ูุชูุธูููุฉ
  visualTools: CardItem[] = [
    {
      name: 'ุงูุฌุฏุงูู ุงูุจุตุฑูุฉ (Visual Schedules)',
      icon: 'pi pi-list',
      desc: 'ุจุทุงูุงุช ุตูุฑ/ุฑููุฒ ููุฑูุชูู ุงููููู ุชููู ุงูููู ูุชุณุงุนุฏ ุงูุงูุชูุงู ุจูู ุงูุฃูุดุทุฉ.',
    },
    {
      name: 'ุงููุคููุชุงุช ุงูุจุตุฑูุฉ',
      icon: 'pi pi-clock',
      desc: 'ุชุณุงุนุฏ ุงูุทูู ุนูู ููู ูุฑูุฑ ุงูููุช ุงููุฎุตุต ููู ูููุฉ.',
    },
    {
      name: 'ุงููุตุต ุงูุงุฌุชูุงุนูุฉ',
      icon: 'pi pi-id-card',
      desc: 'ูุตุต ุจุตูุฑ ุงูุทูู ูุชุนููู ุงูููุงุฑุงุช ุงูุงุฌุชูุงุนูุฉ ูุงูุณููู ุงูููุงุณุจ ูู ููุงูู ูุญุฏุฏุฉ.',
    },
  ];

  // โ 3) ุชุทุจููุงุช ุฑูููุฉ
  apps: CardItem[] = [
    {
      name: 'Speech Blubs',
      icon: 'pi pi-volume-up',
      desc: 'ูุณุชุฎุฏู ููุฐุฌุฉ ุงูููุฏูู ูุชุดุฌูุน ุงูุชูููุฏ ุงูุตูุชู ูุชุญุณูู ุงููุทู.',
    },
    {
      name: 'HelpKidzLearn',
      icon: 'pi pi-tablet',
      desc: 'ุชุตูููุงุช ูุดุฑูุฉ ูุจุณูุทุฉ ูุฏุนู ุงูุชุนูู ุงููุนุฑูู ูููู ูุจุฏุฃ ุงูุณุจุจ ูุงููุชูุฌุฉ.',
    },
  ];

  // โ 4) ุฃุฏูุงุช ุญุณูุฉ ูุญุฑููุฉ
  sensoryTools: CardItem[] = [
    {
      name: 'ููุงุฑุงุช ุญุฑููุฉ ุฏูููุฉ',
      icon: 'pi pi-pencil',
      desc: 'ููุงุจุถ ุฃููุงู ุชููููุฉ + ุฃูุบุงุฒ ูุทุน ูุจูุฑุฉ + ุฃูุนุงุจ ุฑุจุท ูุชุทููุฑ ุงูุฏูุฉ ูุงูุชูุณูู.',
    },
    {
      name: 'ุฃุฏูุงุช ุญุณูุฉ',
      icon: 'pi pi-sun',
      desc: 'ูุฑุงุช ุญุณ + ูุนุฌูู ูุนุจ + ููุนุจุงุช ูุชุนููู ููุงููู ูุซู ุงูุญุฌู ูุงูููู ูุงูุนุฏุฏ.',
    },
    {
      name: 'ุฃุฏูุงุช ููุฒููุฉ',
      icon: 'pi pi-shield',
      desc: 'ูุซู ุงูุจุทุงููุงุช ุงูููุฒููุฉ: ุถุบุท ุนููู ูุณุงุนุฏ ุนูู ุงูุชูุธูู ุงูุญุณู ูุงูุชุฑููุฒ.',
    },
  ];

  // โ 5) ุชูุงุตู
  commTools: CardItem[] = [
    {
      name: 'Makaton',
      icon: 'pi pi-language',
      desc: 'ุจุฑูุงูุฌ ูุณุชุฎุฏู ุฅุดุงุฑุงุช ูุฑููุฒ ูุน ุงูููุงู ููุณุงุนุฏุฉ ุงูุทูู ุนูู ุงูุชุนุจูุฑ ุนู ุงุญุชูุงุฌุงุชู.',
    },
    {
      name: 'ุฃุฌูุฒุฉ ุจุทุงูุงุช ูุงุทูุฉ',
      icon: 'pi pi-megaphone',
      desc: 'ุชูุฑุฃ ุงููููุงุช ุจุตูุช ุนุงูู ุนูุฏ ุฅุฏุฎุงู ุงูุจุทุงูุฉ ูุชุนุฒูุฒ ุงูุฑุจุท ุจูู ุงููููุฉ ุงูููุชูุจุฉ ูุตูุชูุง.',
    },
    {
      name: 'PECS (ุจุทุงูุงุช ุงูุชูุงุตู)',
      icon: 'pi pi-clone',
      desc: 'ุชุณุงุนุฏ ุนูู ุงูุชุดุงู ููุฉ ุงูุทูู ูู ุงูุชูุงุตู ุงูุจุตุฑู ูุงูุงุฎุชูุงุฑ.',
    },
  ];

  // โ 6) ููุงุท ุงูููุฉ
  strengthSections: StrengthSection[] = [
    {
      title: '๐ง ุฃุฏูุงุช ุงูุชูููู ูุงูููุงุญุธุฉ',
      icon: 'pi pi-search',
      items: [
        'ุงูููุงุญุธุฉ ุงูููุธูุฉ ุฃุซูุงุก ุงููุนุจ ูุงูุชูุงุนู ูุงูุฃูุดุทุฉ ุงูููููุฉ.',
        'ููุงุฆู ููุงุท ุงูููุฉ (ุงุฌุชูุงุนู/ุญุฑูู/ุชูุงุตู/ุงุณุชููุงููุฉ/ุฅุจุฏุงุน).',
        'ููู ุงูุฅูุฌุงุฒ (Portfolio): ุชุฌููุน ุฑุณููุงุช ูุตูุฑ ูุฃุนูุงู ูุชุณุฌููุงุช ูููุงุญุธุฉ ุงูุชุทูุฑ.',
      ],
    },
    {
      title: '๐งฉ ุงูุชูููู ุงูููุงุฆู ูุงูุชุฑุจูู',
      icon: 'pi pi-chart-line',
      items: [
        'ููุงููุณ ุงูููู: ูุบุฉ ุงุณุชูุจุงููุฉ/ุชุนุจูุฑูุฉ + ุญุฑูู ุฏููู/ูุจูุฑ + ููุงุฑุงุช ูุนุฑููุฉ.',
        'ุงูุชูููู ุงููุธููู: ูุงุฐุง ูุณุชุทูุน ูุนูู ูููููุง (ุฃูู/ูุจุณ/ุชูุงุนู).',
        'ุชูููู ูุงุฆู ุนูู ุงููุนุจ: ุฎูุงู + ุญู ูุดููุงุช + ูุจุงุฏุฑุฉ.',
      ],
    },
    {
      title: '๐ฃ๏ธ ุฃุฏูุงุช ุงูุชูุงุตู ูุงููุบุฉ',
      icon: 'pi pi-comments',
      items: [
        'ุงูุตูุฑ ูุจุทุงูุงุช ุงูุชูุงุตู (PECS) ูุงูุชุดุงู ููุฉ ุงูุชูุงุตู ุงูุจุตุฑู.',
        'ุงููุตุต ุงููุตูุฑุฉ: ุชูุดู ุงูููู ูุงูุฐุงูุฑุฉ ูุชุณูุณู ุงูุฃุญุฏุงุซ.',
        'ุงูุชูููุฏ ุงูุตูุชู ูุงูุญุฑูู ููุนุฑูุฉ ููุฉ ุงููุญุงูุงุฉ.',
      ],
    },
    {
      title: '๐จ ุงูุฅุจุฏุงุน ูุงูููุงุฑุงุช ุงูุฎุงุตุฉ',
      icon: 'pi pi-palette',
      items: [
        'ุงูุฑุณู ูุงูุชูููู: ุชุฑููุฒ ูุชูุงุณู ูุฐูู ููู.',
        'ุงูููุณููู ูุงูุบูุงุก: ููุฉ ูู ุงูุฅููุงุน ูุงูุชุฐูุฑ.',
        'ุฃูุดุทุฉ ุญุฑููุฉ: ุฑูุต/ุชูุงุฑูู/ุฃูุนุงุจ ูุงูุชุดุงู ุงูุชูุงุฒู ูุงูููุฉ.',
      ],
    },
    {
      title: '๐จโ๐ฉโ๐ง ูุดุงุฑูุฉ ุงูุฃุณุฑุฉ ูุงููุนูููู',
      icon: 'pi pi-users',
      items: [
        'ููุงุจูุงุช ูุน ุงููุงูุฏูู ููุนุฑูุฉ ูุง ูุจุฑุน ููู ุงูุทูู ูู ุงูุจูุช.',
        'ุชูุงุฑูุฑ ุงููุนูููู ูุงููุนุงูุฌูู: ุฑุคูุฉ ูุชุนุฏุฏุฉ ุงูุชุฎุตุตุงุช ูุตูุฑุฉ ุฃุฏู.',
      ],
    },
  ];

  strengthNote: string[] = [
    'ุฑูุน ุซูุฉ ุงูุทูู ุจููุณู.',
    'ุจูุงุก ุฎุทุฉ ุชุนููููุฉ ูุงุฌุญุฉ.',
    'ุฏูุฌ ุงูุทูู ุจุดูู ุฃูุถู ูู ุงููุฌุชูุน.',
  ];

  // โ filter helper based on search
  filtered<T extends { name?: string; desc?: string; tag?: string; points?: string[]; title?: string; items?: string[] }>(
    list: T[]
  ): T[] {
    const q = (this.search || '').trim().toLowerCase();
    if (!q) return list;

    return list.filter((x: any) => {
      const blob = [
        x.name,
        x.desc,
        x.tag,
        ...(x.points || []),
        x.title,
        ...(x.items || []),
      ]
        .filter(Boolean)
        .join(' ')
        .toLowerCase();

      return blob.includes(q);
    });
  }
}
