<section dir="rtl" class="mx-auto max-w-[1100px] px-3 md:px-6 py-6">
  <!-- HERO -->
  <header class="rounded-3xl border border-black/5 shadow-sm overflow-hidden bg-white">
    <div class="p-5 md:p-8 bg-gradient-to-br from-emerald-500/10 via-sky-500/10 to-amber-500/10">
      <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-3">
        <div>
          <h1 class="m-0 text-[26px] md:text-[42px] font-extrabold text-slate-900 leading-tight">
            {{ heading }}
          </h1>
          <p class="mt-2 mb-0 text-slate-800/80 leading-8 font-semibold max-w-[900px]">
            {{ sub }}
          </p>
        </div>

        <!-- Search -->
        <div class="w-full md:w-[320px]">
          <div class="rounded-2xl bg-white/80 border border-black/10 px-3 py-2 flex items-center gap-2">
            <i class="pi pi-search text-slate-500"></i>
            <input
              type="text"
              class="w-full bg-transparent outline-none text-slate-900 font-semibold placeholder:text-slate-400"
              placeholder="ابحثي داخل الدليل…"
              [value]="search()"
              (input)="search.set(($any($event.target).value || ''))"
            />
            <button
              *ngIf="search()"
              type="button"
              class="w-8 h-8 rounded-full grid place-items-center hover:bg-slate-900/5"
              (click)="search.set('')"
              aria-label="مسح"
            >
              <i class="pi pi-times text-slate-500"></i>
            </button>
          </div>
        </div>
      </div>

      <div class="mt-4 flex flex-wrap gap-2">
        <span
          *ngFor="let b of heroBadges; trackBy: trackByIndex"
          class="inline-flex items-center gap-2 rounded-full px-3 py-1.5
                 bg-white/85 border border-black/10 text-slate-800 font-extrabold text-[13px]"
        >
          <span class="w-2 h-2 rounded-full bg-emerald-500/60"></span>
          {{ b }}
        </span>
      </div>
    </div>
  </header>

  <!-- INTRO -->
  <section class="mt-4 grid grid-cols-1 lg:grid-cols-2 gap-3">
    <article
      *ngFor="let b of filtered(introBlocks); trackBy: trackByIndex"
      class="rounded-3xl bg-white border border-black/5 shadow-sm p-5 md:p-6"
    >
      <div class="flex items-start gap-3">
        <div class="w-11 h-11 rounded-2xl grid place-items-center bg-sky-500/10 border border-sky-500/15 shrink-0">
          <i class="pi pi-info-circle text-sky-600"></i>
        </div>
        <div>
          <h2 class="m-0 text-[18px] md:text-[20px] font-extrabold text-slate-900">
            {{ b.title }}
          </h2>

          <p *ngIf="b.desc" class="mt-2 text-slate-800/80 leading-8 font-semibold">
            {{ b.desc }}
          </p>

          <ul *ngIf="b.points?.length" class="mt-3 space-y-1.5 text-slate-800/80 font-semibold leading-7">
            <li *ngFor="let p of b.points; trackBy: trackByIndex" class="flex gap-2">
              <span class="mt-2 w-2 h-2 rounded-full bg-sky-500/60 shrink-0"></span>
              <span>{{ p }}</span>
            </li>
          </ul>
        </div>
      </div>
    </article>
  </section>

  <!-- AGE STAGES -->
  <section class="mt-4 rounded-3xl bg-white border border-black/5 shadow-sm p-5 md:p-6">
    <div class="flex items-center gap-2">
      <i class="pi pi-clock text-emerald-600"></i>
      <h2 class="m-0 text-[18px] md:text-[22px] font-extrabold text-slate-900">
        التغذية حسب العمر
      </h2>
    </div>

    <div class="mt-4 grid grid-cols-1 lg:grid-cols-3 gap-3">
      <article
        *ngFor="let s of filtered(ageStages); trackBy: trackByIndex"
        class="rounded-3xl border border-black/5 bg-slate-900/[0.02] p-4"
      >
        <div class="font-extrabold text-slate-900 text-[16px]">
          {{ s.title }}
        </div>

        <p *ngIf="s.desc" class="mt-2 text-slate-800/80 leading-7 font-semibold">
          {{ s.desc }}
        </p>

        <ul *ngIf="s.points?.length" class="mt-3 space-y-1.5 text-slate-800/80 font-semibold leading-7">
          <li *ngFor="let p of s.points; trackBy: trackByIndex" class="flex gap-2">
            <span class="mt-2 w-2 h-2 rounded-full bg-emerald-500/60 shrink-0"></span>
            <span>{{ p }}</span>
          </li>
        </ul>
      </article>
    </div>
  </section>

  <!-- GENERAL TIPS -->
  <section class="mt-4 rounded-3xl bg-white border border-black/5 shadow-sm p-5 md:p-6">
    <div class="flex items-center gap-2">
      <i class="pi pi-star-fill text-amber-500"></i>
      <h2 class="m-0 text-[18px] md:text-[22px] font-extrabold text-slate-900">
        نصائح عامة عبر كل المراحل
      </h2>
    </div>

    <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-3">
      <article
        *ngFor="let g of filtered(generalTips); trackBy: trackByIndex"
        class="rounded-3xl border border-black/5 bg-slate-900/[0.02] p-4"
      >
        <div class="font-extrabold text-slate-900">{{ g.title }}</div>
        <p *ngIf="g.desc" class="mt-2 text-slate-800/80 leading-7 font-semibold">
          {{ g.desc }}
        </p>

        <ul *ngIf="g.points?.length" class="mt-3 space-y-1.5 text-slate-800/80 font-semibold leading-7">
          <li *ngFor="let p of g.points; trackBy: trackByIndex" class="flex gap-2">
            <span class="mt-2 w-2 h-2 rounded-full bg-amber-500/60 shrink-0"></span>
            <span>{{ p }}</span>
          </li>
        </ul>
      </article>
    </div>
  </section>

  <!-- HEART CASE -->
  <section class="mt-4 rounded-3xl bg-white border border-black/5 shadow-sm overflow-hidden">
    <div class="p-5 md:p-6 bg-gradient-to-br from-rose-500/10 via-white to-sky-500/10">
      <div class="flex items-center gap-2">
        <i class="pi pi-heart-fill text-rose-600"></i>
        <h2 class="m-0 text-[18px] md:text-[22px] font-extrabold text-slate-900">
          تغذية أطفال متلازمة داون مع عيوب قلب خلقية
        </h2>
      </div>

      <ul class="mt-4 space-y-2 text-slate-800/85 font-semibold leading-7">
        <li *ngFor="let x of filterTextList(heartIntro); trackBy: trackByIndex" class="flex gap-2">
          <span class="mt-2 w-2 h-2 rounded-full bg-rose-500/60 shrink-0"></span>
          <span>{{ x }}</span>
        </li>
      </ul>
    </div>

    <div class="p-5 md:p-6 grid grid-cols-1 lg:grid-cols-2 gap-3">
      <!-- why -->
      <div class="rounded-3xl border border-black/5 bg-white p-4">
        <div class="font-extrabold text-slate-900 mb-2">لماذا التغذية مهمة جدًا هنا؟</div>
        <ul class="space-y-1.5 text-slate-800/80 font-semibold leading-7">
          <li *ngFor="let x of filterTextList(heartWhy); trackBy: trackByIndex" class="flex gap-2">
            <span class="mt-2 w-2 h-2 rounded-full bg-rose-500/60 shrink-0"></span>
            <span>{{ x }}</span>
          </li>
        </ul>
      </div>

      <!-- calories & protein -->
      <div class="rounded-3xl border border-black/5 bg-white p-4">
        <div class="font-extrabold text-slate-900 mb-2">السعرات والبروتين</div>
        <ul class="space-y-1.5 text-slate-800/80 font-semibold leading-7">
          <li *ngFor="let x of filterTextList(heartCaloriesProtein); trackBy: trackByIndex" class="flex gap-2">
            <span class="mt-2 w-2 h-2 rounded-full bg-sky-500/60 shrink-0"></span>
            <span>{{ x }}</span>
          </li>
        </ul>
      </div>

      <!-- high calories tips -->
      <div class="rounded-3xl border border-black/5 bg-white p-4 lg:col-span-2">
        <div class="font-extrabold text-slate-900 mb-2">طرق زيادة السعرات بدون تكبير حجم الوجبة</div>
        <ul class="space-y-1.5 text-slate-800/80 font-semibold leading-7">
          <li *ngFor="let x of filterTextList(heartHighCaloriesTips); trackBy: trackByIndex" class="flex gap-2">
            <span class="mt-2 w-2 h-2 rounded-full bg-amber-500/60 shrink-0"></span>
            <span>{{ x }}</span>
          </li>
        </ul>
      </div>

      <!-- healthy foods -->
      <div class="rounded-3xl border border-black/5 bg-white p-4">
        <div class="font-extrabold text-slate-900 mb-2">أطعمة مفيدة للقلب والصحة</div>
        <ul class="space-y-1.5 text-slate-800/80 font-semibold leading-7">
          <li *ngFor="let x of filterTextList(heartHealthyFoods); trackBy: trackByIndex" class="flex gap-2">
            <span class="mt-2 w-2 h-2 rounded-full bg-emerald-500/60 shrink-0"></span>
            <span>{{ x }}</span>
          </li>
        </ul>
      </div>

      <!-- avoid -->
      <div class="rounded-3xl border border-black/5 bg-white p-4">
        <div class="font-extrabold text-slate-900 mb-2">ما يجب تقليله/تجنبه</div>
        <ul class="space-y-1.5 text-slate-800/80 font-semibold leading-7">
          <li *ngFor="let x of filterTextList(heartAvoid); trackBy: trackByIndex" class="flex gap-2">
            <span class="mt-2 w-2 h-2 rounded-full bg-rose-500/60 shrink-0"></span>
            <span>{{ x }}</span>
          </li>
        </ul>
      </div>

      <!-- notes -->
      <div class="rounded-3xl border border-black/5 bg-indigo-500/10 p-4 lg:col-span-2">
        <div class="font-extrabold text-slate-900 mb-2">ملاحظات مهمة</div>
        <ul class="space-y-1.5 text-slate-900/90 font-semibold leading-7">
          <li *ngFor="let x of filterTextList(heartNotes); trackBy: trackByIndex" class="flex gap-2">
            <span class="mt-2 w-2 h-2 rounded-full bg-indigo-500/60 shrink-0"></span>
            <span>{{ x }}</span>
          </li>
        </ul>
      </div>
    </div>
  </section>

  <!-- MEAL EXAMPLES -->
  <section class="mt-4 rounded-3xl bg-white border border-black/5 shadow-sm p-5 md:p-6">
    <div class="flex items-center gap-2">
      <i class="pi pi-list text-emerald-600"></i>
      <h2 class="m-0 text-[18px] md:text-[22px] font-extrabold text-slate-900">
        أمثلة وجبات يومية (عيوب قلب خلقية)
      </h2>
    </div>

    <div class="mt-4 space-y-3">
      <article
        *ngFor="let d of mealDays; trackBy: trackByIndex"
        class="rounded-3xl border border-black/5 bg-slate-900/[0.02] overflow-hidden"
      >
        <div class="p-4 md:p-5 bg-gradient-to-l from-emerald-500/10 via-white to-sky-500/10">
          <div class="font-extrabold text-slate-900 text-[16px] md:text-[18px]">
            {{ d.title }}
          </div>
          <div *ngIf="d.subtitle" class="mt-1 text-slate-700/80 font-bold">
            {{ d.subtitle }}
          </div>
        </div>

        <div class="p-4 md:p-5">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
            <div
              *ngFor="let m of d.meals; trackBy: trackByIndex"
              class="rounded-2xl bg-white border border-black/5 p-4"
            >
              <div class="font-extrabold text-slate-900 mb-1">{{ m.time }}</div>
              <div class="text-slate-800/80 font-semibold leading-7">{{ m.text }}</div>
            </div>
          </div>

          <div *ngIf="d.quickTips?.length" class="mt-3 rounded-2xl bg-amber-500/10 border border-amber-500/15 p-4">
            <div class="font-extrabold text-slate-900 mb-2">نصائح سريعة</div>
            <ul class="space-y-1.5 text-slate-900/90 font-semibold leading-7">
              <li *ngFor="let t of d.quickTips; trackBy: trackByIndex" class="flex gap-2">
                <span class="mt-2 w-2 h-2 rounded-full bg-amber-500/70 shrink-0"></span>
                <span>{{ t }}</span>
              </li>
            </ul>
          </div>
        </div>
      </article>
    </div>

    <div class="mt-4 rounded-3xl bg-rose-500/10 border border-rose-500/15 p-4 font-extrabold text-slate-900 leading-7">
      ⚠️ الأمثلة إرشادية — عدّليها حسب العمر والوزن وحالة القلب وتوجيه الطبيب.
    </div>
  </section>
</section>
