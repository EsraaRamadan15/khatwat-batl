import { CommonModule } from '@angular/common';
import { Component, computed, signal } from '@angular/core';
import { TabsModule } from 'primeng/tabs';

type UiBlock = {
  title?: string;
  desc?: string;
  points?: string[];
};

type MealDay = {
  title: string;
  subtitle?: string;
  meals: { time: string; text: string }[];
  quickTips?: string[];
};

type CardItem = {
  title: string;
  tag?: string;
  points?: string[];
};

type CardSection = {
  kind: 'cards';
  title: string;
  items: CardItem[];
};

type CompanionTab = {
  value: string;
  label: string;
  tag: string; // matches item.tag
};

@Component({
  selector: 'app-down-nutrition-guide',
  standalone: true,
  imports: [CommonModule, TabsModule],
  templateUrl: './down-nutrition-guide.component.html',
  styleUrls: ['./down-nutrition-guide.component.scss'],
})
export class DownNutritionGuideComponent {
  // UI texts
  heading = 'ุฏููู ุงูุชุบุฐูุฉ ุงููุจุณูุท ููุชูุงุฒูุฉ ุฏุงูู';
  sub =
    'ูุธุงู ุนููู ููุญูุงุธ ุนูู ูุฒู ุตุญู ูุชูููู ุงูุฅูุณุงู ูุฏุนู ุงูููู โ ูุน ูุฑุงุนุงุฉ ุงูุญุงูุงุช ุงููุตุงุญุจุฉ ูุซู ุงูุบุฏุฉ ุงูุฏุฑููุฉ ุฃู ุงูููุจ.';

  heroBadges: string[] = ['ูุฒู ุตุญู', 'ุฃููุงู ููุงุก', 'ุจุฑูุชูู ุฌูุฏ', 'ุฏููู ุตุญูุฉ', 'ูุฌุจุงุช ููุธูุฉ'];

  // search
  search = signal<string>('');
  q = computed(() => (this.search() || '').trim().toLowerCase());

  // Tabs state (conditions)
  activeConditionTab = signal<string>('t0');

  companionTabs: CompanionTab[] = [
    { value: 't0', label: '๐ง ุงูุบุฏุฉ', tag: 'ุบุฏุฏ' },
    { value: 't1', label: '๐พ ุณูููุงู', tag: 'Gluten-free' },
    { value: 't2', label: 'โ๏ธ ุณููุฉ', tag: 'Weight' },
    { value: 't3', label: '๐ฟ ุฅูุณุงู', tag: 'Fiber' },
  ];

  // ---------- Section 1: ููุฏูุฉ ----------
  introBlocks: UiBlock[] = [
    {
      title: 'ุงูููุฑุฉ ุงูุฃุณุงุณูุฉ',
      desc:
        'ุงููุธุงู ุงูุบุฐุงุฆู ุงูููุงุณุจ ูุฃุทูุงู ููุชูุงุฒูุฉ ุฏุงูู ูุฑููุฒ ุนูู ุงูุตุญุฉ ุงูุนุงูุฉุ ูุฒู ุตุญูุ ูุชูููู ูุดุงูู ุดุงุฆุนุฉ ูุซู ุงูุฅูุณุงู ูุฒูุงุฏุฉ ุงููุฒู ุจุณุจุจ ุจุทุก ุงูุฃูุถุ ูุน ูุฑุงุนุงุฉ ุตุนูุจุงุช ุงูุฃูู ุฃู ุงูุญุณุงุณูุฉ ุงููุญุชููุฉ.',
      points: [
        'ุงููุธุงู ูุฑูุจ ูู ุงูุฅุฑุดุงุฏุงุช ุงูุนุงูุฉ ูููู ุฃูุซุฑ ุชูุธูููุง.',
        'ูุฌุจุงุช ุตุบูุฑุฉ ูุชูุฑุฑุฉ ุชููุฏ ูุซูุฑูุง.',
        'ููุถู ุชุฎุตูุต ุงูุฎุทุฉ ุญุณุจ ุญุงูุฉ ุงูุบุฏุฉ ุงูุฏุฑููุฉ/ุงููุถู/ุงูููุจ.',
      ],
    },
    {
      title: 'ููู ุฌุฏูุง',
      desc: 'ูุฐู ูุนูููุงุช ุชุซููููุฉ ููุง ุชุบูู ุนู ุงููุชุงุจุนุฉ ูุน ุทุจูุจ/ุฃุฎุตุงุฆู ุชุบุฐูุฉ.',
      points: [
        'ุชุงุจุนู ุงููุฒู ูุงูููู ุฏูุฑููุง.',
        'ูู ูู ุณูููุงู/ุญุณุงุณูุฉ ุฌููุชูู โ ูุธุงู ุฎุงูู ูู ุงูุฌููุชูู.',
        'ุงูููููุงุช (Vitamin D ูุซููุง) ุชุญุช ุฅุดุฑุงู ุทุจู ููุท.',
      ],
    },
  ];

  // ---------- Section 2: ุญุณุจ ุงูุนูุฑ ----------
  ageStages: UiBlock[] = [
    {
      title: 'ูู ุณูุฉ ุฅูู 4 ุณููุงุช',
      desc: 'ุงููุฏู ุฏุนู ุงูููู ูุงูุชุทูุฑ ูุน ุงูุชุนุงูู ูุน ุตุนูุจุฉ ุงูุจูุน/ุจุทุก ุชูุจู ุงูุฃุทุนูุฉ ุงูุฌุฏูุฏุฉ.',
      points: [
        '3 ูุฌุจุงุช ุฑุฆูุณูุฉ + 1โ2 ุณูุงู (ุจุฏูู ุฅูุฑุงุท).',
        'ููุงูู ูุฎุถุงุฑ ุทุงุฒุฌุฉ + ุญุจูุจ ูุงููุฉ + ุจุฑูุชููุงุช ูุฒููุฉ + ุฃูุจุงู ููููุฉ ุงูุฏุณู.',
        'ูุงุก ุทูุงู ุงููููุ ูุชุฌููุจู ุงูุนุตุงุฆุฑ ุงูุณูุฑูุฉ ูุชูุงุฏู ุงูุฅูุณุงู ูุฒูุงุฏุฉ ุงููุฒู.',
        'ุงุนููู ุฑูุชูู ุซุงุจุช ููุฃูู ูุดุฌุนู ุงูุงุณุชูุดุงู.',
      ],
    },
    {
      title: 'ูู 5 ุฅูู 12 ุณูุฉ',
      desc: 'ูุฒุฏุงุฏ ุฎุทุฑ ุงููุฒู ุงูุฒุงุฆุฏ ุจุณุจุจ ุงูุฎูุงุถ ูุนุฏู ุงูุฃูุถุ ุฑููุฒู ุนูู ุงูุชููุน ูุงููุดุงุท.',
      points: [
        '3 ูุฌุจุงุช ุฑุฆูุณูุฉ + 2 ุณูุงู ูู ~3 ุณุงุนุงุช (ูุชูููู ุงูุฃูู ุฎุงุฑุฌ ุงูุฃููุงุช).',
        'ูุตู ุงูุทุจู ุฎุถุงุฑ/ูุงููุฉ + ุญุจูุจ ูุงููุฉ + ุจุฑูุชูู + ุฃูุจุงู ููููุฉ ุงูุฏุณู.',
        'ุฒูุฏู ุงูุฃููุงู ูุงููุงุก ููุญุงุฑุจุฉ ุงูุฅูุณุงู.',
        'ูููู ุงูุณูุฑูุงุช ูุงูุฏููู ุงููุดุจุนุฉ.',
      ],
    },
    {
      title: 'ูู 13 ุณูุฉ ุฅูู ุงูุจุงูุบูู',
      desc: 'ุงูุญูุงุธ ุนูู ูุฒู ุตุญู ูููุน ุฃูุฑุงุถ ูุฒููุฉ ูุซู ุงูุณูุฑู/ุงูููุจ ูุน ูุดุงุท ูููู.',
      points: [
        'ูุฌุจุงุช ูุชูุงุฒูุฉ ุญุณุจ ุงููุดุงุท (ุนุฌุฒ ุทุงูู ุจุณูุท ูู ูู ุฒูุงุฏุฉ ูุฒู).',
        'ููุงูู/ุฎุถุงุฑ/ุญุจูุจ ูุงููุฉ/ุจุฑูุชููุงุช ูุฒููุฉ/ุฃูุจุงู ููููุฉ ุงูุฏุณู.',
        'ุฃููุงู + ูุงุก ููุฅูุณุงู.',
        'ุชุฑููุฒ ุนูู ุงููุงูุณููู ููุนุธุงู ูุฃูููุบุง-3 ููุตุญุฉ ุงูุนุตุจูุฉ.',
      ],
    },
  ];

  // ---------- Section 3: ูุตุงุฆุญ ุนุงูุฉ ----------
  generalTips: UiBlock[] = [
    {
      title: 'ุงูุชุฑุทูุจ',
      desc: 'ุดุฑุจ ุงููุงุก ุจุงูุชุธุงู ููููู ุงูุฅูุณุงู ููุณุงุนุฏ ุชูุธูู ุงูุดููุฉ.',
      points: ['ุฒุฌุงุฌุฉ ูุงุก ูุฑูุจุฉ ุฏุงุฆููุง', 'ูุงุก ูุจู ุงูุณูุงู', 'ุดูุฑุจุฉ ูุฎุถุงุฑ ูุฑุทุจุฉ'],
    },
    {
      title: 'ุชุฌููุจู ูุฏุฑ ุงูุฅููุงู',
      desc: 'ุฃุดูุงุก ุชุฑูุน ุงููุฒู ูุชุฒูุฏ ุงูุงูุชูุงุจ ูุงูุฅูุณุงู.',
      points: ['ุณูุฑูุงุช ุฒุงุฆุฏุฉ', 'ููููุงุช', 'ุฏููู ูุดุจุนุฉ', 'ูุดุฑูุจุงุช ุบุงุฒูุฉ'],
    },
    {
      title: 'ูุฑุงูุจุฉ ุฏูุฑูุฉ',
      desc: 'ูุญูุตุงุช ููู ูุนูุงุตุฑ ุบุฐุงุฆูุฉ ูููุฉ ุฌุฏูุง.',
      points: ['ุงููุฒู ูุงูุทูู', 'Vitamin D / B12 ุญุณุจ ุงูุทุจูุจ', 'ุงูุญุฏูุฏ', 'ุงูุบุฏุฉ ุงูุฏุฑููุฉ'],
    },
    {
      title: 'ุนุงุฏุงุช ูุจูุฑุฉ',
      desc: 'ุงุจุฏุฆู ูุจูุฑูุง ูุชุฌููุจู ูุดููุงุช ุทูููุฉ ุงููุฏู.',
      points: ['ุงููุฌุจุงุช ุงูุนุงุฆููุฉ', 'ุทุจู ูุชูุงุฒู', 'ุณูุงู ุตุญู ุซุงุจุช'],
    },
  ];

  // ---------- Section 4: ูู ูู ุนููุจ ููุจ ุฎูููุฉ ----------
  heartIntro: string[] = [
    'ุญูุงูู 40โ50% ูู ุฃุทูุงู ูุชูุงุฒูุฉ ุฏุงูู ูุฏ ูููุฏูู ุจุนููุจ ููุจ ุฎูููุฉ.',
    'ุงูุทูู ูุฏ ูุชุนุจ ุจุณุฑุนุฉ ุฃุซูุงุก ุงูุฑุถุงุนุฉ/ุงูุฃูู ุจุณุจุจ ุตุนูุจุฉ ุงูุชููุณ ุฃู ุงูุชุนุฑูู.',
    'ูุฏ ูุญุชุงุฌ ุณุนุฑุงุช ูุจุฑูุชูู ุฃุนูู ูุชุญุณูู ุงูููู ุฎุงุตุฉ ูุจู ุงูุฌุฑุงุญุฉ.',
    'ููุน ุฐููุ ุฎุทุฑ ุฒูุงุฏุฉ ุงููุฒู ูุงุญููุง ูุธู ุฃุนูู โ ูููุงุฒู ุจุฐูุงุก.',
  ];

  heartWhy: string[] = [
    'ูุชุนุจ ุจุณุฑุนุฉ ุฃุซูุงุก ุงูุฃูู โ ูุญุชุงุฌ ูุฌุจุงุช ุฃุตุบุฑ ูุฃูุซุฑ ุชูุฑุงุฑูุง.',
    'ูุฏ ูุญุชุงุฌ ุณุนุฑุงุช ุฃุนูู ููููู ูุงูุชุณุงุจ ูุฒู ุฌูุฏ.',
    'ูุดุงูู ุดุงุฆุนุฉ: ุงุฑุชุฌุงุน/ุฅูุณุงู/ุตุนูุจุฉ ุจูุน.',
  ];

  heartCaloriesProtein: string[] = [
    'ุงูุณุนุฑุงุช ูุฏ ุชุตู ุฅูู 110โ150 ุณุนุฑุฉ/ูุฌู ูููููุง (ุฃุญูุงููุง ุฃูุซุฑ ูุจู ุงูุฌุฑุงุญุฉ) ุญุณุจ ุงูุทุจูุจ.',
    'ุฒูุงุฏุฉ ุงูุจุฑูุชูู (ุชูุฑูุจูุง 2โ3.5 ุฌู/ูุฌู ูููููุง) ูุฏุนู ุงูููู ูุงูุนุถูุงุช.',
  ];

  heartHighCaloriesTips: string[] = [
    'ุฒูุงุฏุฉ ุงูุณุนุฑุงุช ุจุฏูู ุชูุจูุฑ ุญุฌู ุงููุฌุจุฉ (ููู ูุฃู ุงูุทูู ูุชุนุจ ุณุฑูุนูุง).',
    'ุฃุถููู ุฒูุช ุฒูุชูู/ุฒุจุฏุฉ/ูุฑููุฉ ุจูููุงุช ุตุบูุฑุฉ ููุทุนุงู.',
    'ุงุณุชุฎุฏูู ุชุฑููุจุงุช ุนุงููุฉ ุงูุณุนุฑุงุช ุฃู ููููุงุช ุณุนุฑูุฉ ููุท ุจุฅุดุฑุงู ุงูุทุจูุจ.',
    'ูุฌุจุงุช ุตุบูุฑุฉ ูุชูุฑุฑุฉ ูู 2โ3 ุณุงุนุงุช.',
  ];

  heartHealthyFoods: string[] = [
    'ุฎุถุงุฑ ูููุงูู ูุชููุนุฉ ูููููุง.',
    'ุญุจูุจ ูุงููุฉ: ุดููุงูุ ุฃุฑุฒ ุจููุ ุฎุจุฒ ุฃุณูุฑ.',
    'ุจุฑูุชูู ุตุญู: ุณูู ุบูู ุจุฃูููุบุง-3 (ุณูููู)ุ ุฏุฌุงุฌ ุจุฏูู ุฌูุฏุ ุจูุถุ ุจููููุงุช.',
    'ุฏููู ุตุญูุฉ: ุฒูุช ุฒูุชููุ ุฃูููุงุฏูุ ููุณุฑุงุช ูุทุญููุฉ ููุตุบุงุฑ.',
    'ุฃูุจุงู ููููุฉ ุงูุฏุณู ุฃู ุญุณุจ ุชูุฌูู ุงูุทุจูุจ.',
  ];

  heartAvoid: string[] = [
    'ุณูุฑูุงุช ูุถุงูุฉ ูุญูููุงุช ููุดุฑูุจุงุช ุบุงุฒูุฉ.',
    'ููููุงุช ูุฏููู ูุดุจุนุฉ ุฒุงุฆุฏุฉ.',
    'ููุญ ุฒุงุฆุฏ (ุฎุตูุตูุง ูู ุญุงูุงุช ุงุญุชุจุงุณ ุณูุงุฆู/ุถุบุท).',
    'ุฃุทุนูุฉ ุชุฒูุฏ ุงูุงุฑุชุฌุงุน ุฅุฐุง ููุฌูุฏ (ุญูุถูุงุช/ุดููููุงุชุฉ/ุญุงุฑ).',
  ];

  heartNotes: string[] = [
    'Vitamin D + ูุงูุณููู ููุนุธุงู.',
    'ุฃูููุบุง-3 (ุบุฐุงุก ุฃู ูููู) ุจุฅุฑุดุงุฏ ุทุจู.',
    'ูุฑุงูุจุฉ ุงูุบุฏุฉ ุงูุฏุฑููุฉ.',
    'ูู ุณูููุงู/ุฌููุชูู โ ูุธุงู ุฎุงูู ูู ุงูุฌููุชูู.',
    'ุงูุฎุทุฉ ุดุฎุตูุฉ: ุทุจูุจ ููุจ ุฃุทูุงู + ุฃุฎุตุงุฆู ุชุบุฐูุฉ.',
  ];

  // ---------- Section 5: ุฃูุซูุฉ ูุฌุจุงุช (ุนููุจ ููุจ ุฎูููุฉ) ----------
  mealDays: MealDay[] = [
    {
      title: 'ูุซุงู ูููู 1',
      subtitle: 'ุชุฑููุฒ ุนูู ุฒูุงุฏุฉ ุงูุณุนุฑุงุช ุจุณูููุฉ',
      meals: [
        {
          time: 'ุงูุฅูุทุงุฑ',
          text: 'ุดููุงู ุจุญููุจ ูุงูู + ููุฒ ููุฑูุณ + ููุนูุฉ ุฒุจุฏุฉ ููู ุณูุฏุงูู + ุฑุดุฉ ูุฑูุฉ + ููุนูุฉ ุตุบูุฑุฉ ุฒูุช/ุฒุจุฏุฉ.',
        },
        { time: 'ุณูุงู 1', text: 'ุฒุจุงุฏู ูููุงูู ูุงูู + ุนุณู ูููู + ููุณุฑุงุช ูุทุญููุฉ + ูุงููุฉ.' },
        { time: 'ุงูุบุฏุงุก', text: 'ุฃุฑุฒ ูุทุจูุฎ ุจุฒูุช ุฒูุชูู + ุฏุฌุงุฌ ููุฑูู + ุฎุถุงุฑ ููุฑูุณุฉ + ุฒูุช ุฒูุชูู ููููุง.' },
        { time: 'ุณูุงู 2', text: 'ุณููุฐู: ุญููุจ + ููุฒ + ุฃูููุงุฏู + ุดููุงู + ุนุณู + (ุดูุง ูู ูุชูุจู).' },
        { time: 'ุงูุนุดุงุก', text: 'ุจุทุงุทุณ ููุฑูุณุฉ ุจุงูุญููุจ ูุงูุฒุจุฏุฉ + ุณูููู ูุดูู/ุชููุฉ + ุฎุถุงุฑ ูุทุจูุฎุฉ ูุงุนูุฉ.' },
        { time: 'ูุจู ุงูููู', text: 'ุฌุจูุฉ ูุฑูุด/ุฒุจุงุฏู ูุงูู + ูุงููุฉ + ููุนูุฉ ุฒุจุฏุฉ ููุฒ.' },
      ],
      quickTips: ['ุฃุถููู 1โ2 ููุนูุฉ ุฒูุช ุฒูุชูู/ุฒุจุฏุฉ ููู ูุฌุจุฉ', 'ูุฏููู ูู ุฃุทุจุงู ุตุบูุฑุฉ ูุชูููู ุงูุชุนุจ'],
    },
    {
      title: 'ูุซุงู ูููู 2',
      subtitle: 'ุชุฑููุฒ ุนูู ุงูุจุฑูุชูู ูุฃูููุบุง-3',
      meals: [
        { time: 'ุงูุฅูุทุงุฑ', text: 'ุจูุถ ููุฑูุณ ูุน ุฒุจุฏุฉ + ุฎุจุฒ ุฃุณูุฑ ูุน ุฃูููุงุฏู + ุดุฑุงุฆุญ ููุฒ.' },
        { time: 'ุณูุงู 1', text: 'ุชูุฑ ูุญุดู ุจุฌูุฒ + ููุจ ุญููุจ ุฏุงูุฆ ูุน ุนุณู ูููู.' },
        { time: 'ุงูุบุฏุงุก', text: 'ููุฑููุฉ ุญุจูุจ ูุงููุฉ ุจุฒูุช ุฒูุชูู + ุตูุตุฉ ููุฒููุฉ + ูุญู ููุฑูู/ุนุฏุณ + ุฌุจู.' },
        { time: 'ุณูุงู 2', text: 'ุนุตูุฑ ุทุจูุนู ูุฎูู + ุจุณูููุช ุดููุงู ููุฒูู ูุน ุฒุจุฏุฉ.' },
        { time: 'ุงูุนุดุงุก', text: 'ุดูุฑุจุฉ ุนุฏุณ/ุญูุต ูุทุญููุฉ + ุฏุฌุงุฌ/ุณูู + ุฎุจุฒ ุฃุณูุฑ + ุณูุทุฉ ูุงุนูุฉ ุจุฒูุช ุฒูุชูู.' },
        { time: 'ูุจู ุงูููู', text: 'ุฒุจุงุฏู + ููุงูู ูุฌููุฉ + ุฑุดุฉ ูุฑูุฉ.' },
      ],
    },
    {
      title: 'ูุซุงู ูููู 3',
      subtitle: 'ููุฃุทูุงู ุงูุฐูู ููุถููู ุงูุฃุทุนูุฉ ุงููุงุนูุฉ/ุงูููุฑูุณุฉ',
      meals: [
        { time: 'ุงูุฅูุทุงุฑ', text: 'ุนุตูุฏุฉ ุดููุงู/ุฃุฑุฒ ุจุงูุญููุจ + ููุฒ ููุฑูุณ + ุฒุจุฏุฉ + ูุฑูุฉ.' },
        { time: 'ุณูุงู 1', text: 'ุฃูููุงุฏู ููุฑูุณ ูุน ุฎุจุฒ ุทุฑู + ุดุฑุงุฆุญ ุชูุงุญ.' },
        { time: 'ุงูุบุฏุงุก', text: 'ุจุทุงุทุณ ุญููุฉ ููุฑูุณุฉ + ุฏุฌุงุฌ ููุฑูู + ุฎุถุงุฑ ูุทุจูุฎุฉ + ุฒูุช ุฒูุชูู.' },
        { time: 'ุณูุงู 2', text: 'ุญููุจ + ุณููุฐู ููุงูู + ุฒุจุงุฏู (ุฃู ูููู ุณุนุฑู ูู ูุตู ุงูุทุจูุจ).' },
        { time: 'ุงูุนุดุงุก', text: 'ุณูู ููุฑูุณ (ุณูููู/ุณุฑุฏูู) + ุฃุฑุฒ ูุงุนู + ุฎุถุงุฑ ูุทุจูุฎุฉ.' },
        { time: 'ูุจู ุงูููู', text: 'ุฌุจูุฉ + ุนุณู ูููู + ูุงููุฉ ูุงุนูุฉ.' },
      ],
    },
  ];

  // ---------- Section X: ุชุนุฏููุงุช ุบุฐุงุฆูุฉ ุญุณุจ ุงููุฑุถ ุงููุตุงุญุจ ----------
  companionDietAdjustments: CardSection = {
    kind: 'cards',
    title: 'ุชุนุฏููุงุช ุบุฐุงุฆูุฉ ุญุณุจ ุงููุฑุถ ุงููุตุงุญุจ',
    items: [
      {
        title: '1) ูุตูุฑ ุงูุบุฏุฉ ุงูุฏุฑููุฉ (15โ50%)',
        tag: 'ุบุฏุฏ',
        points: [
          'ููุฏ: ุฃุณูุงู ุจุญุฑูุฉ (ุชููุฉ/ุณุฑุฏูู/ุฌูุจุฑู)ุ ุฃูุจุงูุ ููุญ ููุฏ (ุจุงุนุชุฏุงู)',
          'ุณููููููู: ุฌูุฒ ุจุฑุงุฒููู (1โ2 ูููููุง)ุ ุณููุ ุจูุถุ ุฏุฌุงุฌ',
          'ุฒูู: ูุญูู ูุฒููุฉุ ุจููููุงุชุ ุจุฐูุฑ',
          'ุฃููุงู ุนุงููุฉ ููุฅูุณุงู: ุชูุงุญ/ููุซุฑู/ุชูุช + ุจุฑูููู/ุณุจุงูุฎ + ุญุจูุจ ูุงููุฉ',
          'ููู ุงูููุฆ ุจุฒูุงุฏุฉ ูู ุงูุฌููุชุฑูุฌููู (ููููู/ูุฑูุจูุท/ุตููุง) ููููู ุทููู',
          'ูุฌุจุงุช ุตุบูุฑุฉ + ูุงุก + ุชูููู ุงูุณูุฑูุงุช ูุงูุฏููู ุงููุดุจุนุฉ',
        ],
      },
      {
        title: '2) ุงูุณููุงู (5โ12%)',
        tag: 'Gluten-free',
        points: [
          'ูุธุงู ุฎุงูู ูู ุงูุบููุชูู ูุฏู ุงูุญูุงุฉ (ูุง ููุญ/ุดุนูุฑ/ุฌุงูุฏุงุฑ + ุดููุงู ุบูุฑ ูุนุชูุฏ)',
          'ุจุฏุงุฆู: ุฃุฑุฒุ ุฐุฑุฉุ ููููุงุ ุญูุทุฉ ุณูุฏุงุกุ ุจุทุงุทุณุ ุฎุถุงุฑ/ูุงููุฉุ ูุญูู/ุณูู/ุจูุถุ ุฃูุจุงู ุฅุฐุง ููุงุณุจุฉ',
          'ูุฑุงูุจุฉ ููุต: ุฃููุงูุ ุญุฏูุฏุ ููุชุงูููุงุช Bุ ูุงูุณููู โ ููููุงุช ุจุฅุดุฑุงู',
          'ูุญุต ุฏูุฑู ููุฃุฌุณุงู ุงููุถุงุฏุฉ ูุงูุชุตุงุต ุงููุบุฐูุงุช',
        ],
      },
      {
        title: '3) ุงูุณููุฉ/ุฒูุงุฏุฉ ุงููุฒู',
        tag: 'Weight',
        points: [
          'ุนุฌุฒ ุทุงูู ุฎููู (ุชูุฑูุจูุง 300โ500 ุณุนุฑุฉ ุฃูู) ุจุฏูู ุญุฑูุงู',
          '3 ูุฌุจุงุช ุฑุฆูุณูุฉ + 1โ2 ุณูุงู',
          'ูุตู ุงูุทุจู ุฎุถุงุฑ/ูุงููุฉ + ุฑุจุน ุจุฑูุชูู ูุฒูู + ุฑุจุน ุญุจูุจ ูุงููุฉ',
          'ุฏููู ุตุญูุฉ ุจูููุงุช: ุฃูููุงุฏู/ููุณุฑุงุช/ุฒูุช ุฒูุชูู',
          'ุชุฌูุจ: ุณูุฑูุงุชุ ูุดุฑูุจุงุช ุณูุฑูุฉุ ูุฌุจุงุช ุณุฑูุนุฉุ ุณูุงูุงุช ุนุดูุงุฆูุฉ',
          'ูุดุงุท ูููู ููุงุณุจ (ูุดู/ุฃูุนุงุจ)',
        ],
      },
      {
        title: '4) ุงูุฅูุณุงู ุงููุฒูู',
        tag: 'Fiber',
        points: [
          'ุฃููุงู + ุณูุงุฆู + ุญุฑูุฉ',
          'ุฃูุถู ุฃุทุนูุฉ: ูููู/ุจุฑุชูุงู/ุชูุงุญ ุจุงููุดุฑุ ุฎุถุงุฑ ูุฑููุฉุ ุนุฏุณ/ูููุ ุดููุงู/ุฃุฑุฒ ุจููุ ุดูุง/ูุชุงู ูุทุญูู',
          'ุงููุงุก 6โ8 ุฃููุงุจ ูููููุง (ุญุณุจ ุงูุนูุฑ/ุงูุทุจูุจ)',
          'ุฑูุน ุงูุฃููุงู ุชุฏุฑูุฌููุง ูุชุฌูุจ ูุบุต',
          'ููู: ุงููุนุงูุฌุ ุงูุฃุฑุฒ ุงูุฃุจูุถ ุจูุซุฑุฉุ ุฃูุจุงู ูู ุจุชุณุจุจ ุฅูุณุงู',
        ],
      },
    ],
  };

  // ---------- helpers ----------
  filtered<T extends UiBlock>(list: T[]): T[] {
    const q = this.q();
    if (!q) return list;

    return list.filter((x) => {
      const blob = [x.title, x.desc, ...(x.points || [])]
        .filter(Boolean)
        .join(' ')
        .toLowerCase();
      return blob.includes(q);
    });
  }

  filterCardItems(items: CardItem[]): CardItem[] {
    const q = this.q();
    if (!q) return items;

    return items.filter((x) => {
      const blob = [x.title, x.tag, ...(x.points || [])]
        .filter(Boolean)
        .join(' ')
        .toLowerCase();
      return blob.includes(q);
    });
  }

  companionItemsByTag(tag: string): CardItem[] {
    // keep search filtering + then pick tag
    return this.filterCardItems(this.companionDietAdjustments.items).filter((x) => x.tag === tag);
  }

  filterTextList(list: string[]): string[] {
    const q = this.q();
    if (!q) return list;
    return list.filter((x) => (x || '').toLowerCase().includes(q));
  }

  trackByIndex = (i: number) => i;
}
