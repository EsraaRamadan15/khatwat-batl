<section
  dir="rtl"
  class="mx-auto w-full max-w-[1100px]
         px-3 sm:px-4 md:px-6
         py-4 sm:py-5 md:py-6
         space-y-3 sm:space-y-4"
>
  <!-- Search -->
  <div class="rounded-3xl bg-white border border-black/5 shadow-sm p-4 sm:p-5">
    <div class="flex flex-col lg:flex-row lg:items-center gap-3">
      <div class="flex-1 min-w-0">
        <div class="font-extrabold text-slate-900 mb-1 text-[15px] sm:text-[16px]">
          بحث داخل المحتوى
        </div>
        <div class="text-slate-700/80 font-semibold text-[12px] sm:text-[13px] md:text-sm">
          اكتبي كلمة (مثل: سلياك، لبنان، NIPT، غدة...)
        </div>
      </div>

      <div class="relative w-full lg:w-[420px]">
        <i class="pi pi-search absolute right-4 top-1/2 -translate-y-1/2 text-slate-500"></i>
        <input
          [(ngModel)]="q"
          placeholder="ابحثي هنا..."
          class="w-full rounded-2xl border border-black/10 bg-slate-50
                 px-12 py-3 sm:py-3.5
                 font-bold text-slate-900
                 text-[14px] sm:text-[15px]
                 outline-none focus:ring-2 focus:ring-sky-200"
        />
      </div>
    </div>
  </div>

  <ng-container *ngFor="let sec of filteredSections">

    <!-- HERO -->
    <header
      *ngIf="sec.kind === 'hero'"
      class="rounded-3xl border border-black/5 shadow-sm overflow-hidden bg-white"
    >
      <div class="p-4 sm:p-5 md:p-8 bg-gradient-to-br from-emerald-500/10 via-white to-sky-500/10">
        <div class="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3">
          <div class="min-w-0">
            <h1 class="m-0 font-extrabold text-slate-900 leading-[1.15]
                       text-[clamp(22px,4.5vw,44px)]">
              {{ sec.title }}
            </h1>

            <p *ngIf="sec.subtitle" class="mt-2 text-slate-800/80 font-semibold leading-7 sm:leading-8
                                           text-[13px] sm:text-[14px] md:text-[16px]">
              {{ sec.subtitle }}
            </p>
          </div>

          <span
            class="inline-flex items-center gap-2 rounded-full px-3 py-2
                   bg-white/80 border border-black/10 text-slate-800 font-extrabold text-[12px] sm:text-[13px]
                   w-fit"
          >
            <span class="w-2.5 h-2.5 rounded-full bg-emerald-500/60"></span>
            مقدمة
          </span>
        </div>

        <div *ngIf="sec.badges?.length" class="mt-4 flex flex-wrap gap-2">
          <span
            *ngFor="let b of sec.badges"
            class="inline-flex items-center gap-2 rounded-full px-3 py-1.5
                   bg-white/85 border border-black/10 text-slate-800 font-extrabold
                   text-[12px] sm:text-[13px]"
          >
            <span class="w-2 h-2 rounded-full bg-emerald-500/60"></span>
            {{ b }}
          </span>
        </div>
      </div>
    </header>

    <!-- NOTE -->
    <article
      *ngIf="sec.kind === 'note'"
      class="rounded-3xl border border-black/5 shadow-sm overflow-hidden bg-white"
    >
      <div
        class="p-4 sm:p-5 md:p-6"
        [ngClass]="{
          'bg-sky-500/10 border-sky-500/15': sec.emphasis === 'info',
          'bg-rose-500/10 border-rose-500/15': sec.emphasis === 'warn',
          'bg-emerald-500/10 border-emerald-500/15': sec.emphasis === 'good'
        }"
      >
        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2">
          <div class="flex items-center gap-2">
            <i class="pi pi-info-circle text-slate-900"></i>
            <h2 class="m-0 font-extrabold text-slate-900 text-[clamp(16px,3.5vw,22px)]">
              {{ sec.title }}
            </h2>
          </div>

          <span
            class="inline-flex items-center gap-2 rounded-full px-3 py-2
                   bg-white/80 border border-black/10 text-slate-800 font-extrabold text-[12px] sm:text-[13px]
                   w-fit"
          >
            <span class="w-2.5 h-2.5 rounded-full bg-rose-500/60"></span>
            تنبيه
          </span>
        </div>

        <p class="mt-3 mb-0 text-slate-900/90 font-extrabold leading-7 sm:leading-8
                  text-[13px] sm:text-[14px] md:text-[16px]">
          {{ sec.desc }}
        </p>
      </div>
    </article>

    <!-- CARDS -->
    <section
      *ngIf="sec.kind === 'cards'"
      class="rounded-3xl bg-white border border-black/5 shadow-sm
             p-4 sm:p-5 md:p-6"
    >
      <!-- Header -->
      <div class="flex flex-col md:flex-row md:items-start md:justify-between gap-3">
        <div class="min-w-0">
          <h2 class="m-0 font-extrabold text-slate-900 text-[clamp(16px,3.5vw,22px)]">
            {{ sec.title }}
          </h2>
          <p *ngIf="sec.desc" class="mt-2 mb-0 text-slate-800/80 leading-7 sm:leading-8 font-semibold
                                    text-[13px] sm:text-[14px] md:text-[16px]">
            {{ sec.desc }}
          </p>
        </div>

        <div class="flex flex-wrap items-center gap-2">
          <span class="inline-flex items-center gap-2 rounded-full px-3 py-2
                       bg-slate-900/[0.03] border border-black/5 text-slate-800 font-extrabold
                       text-[12px] sm:text-[13px]">
            <i class="pi pi-th-large text-slate-600"></i>
            بطاقات
          </span>

          <span class="inline-flex items-center gap-2 rounded-full px-3 py-2
                       bg-white border border-black/10 text-slate-800 font-extrabold
                       text-[12px] sm:text-[13px]">
            <i class="pi pi-list text-slate-600"></i>
            {{ sec.items?.length || 0 }} عنصر
          </span>
        </div>
      </div>

      <!-- Grid responsive -->
      <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-3">
        <article
          *ngFor="let c of sec.items"
          class="rounded-3xl border border-black/5 bg-slate-900/[0.02]
                 p-4 sm:p-5"
        >
          <div class="flex items-start gap-3">
            <div class="w-10 h-10 sm:w-11 sm:h-11 rounded-2xl grid place-items-center bg-white border border-black/10 shrink-0">
              <i class="{{ c.icon || 'pi pi-book' }} text-emerald-700"></i>
            </div>

            <div class="w-full min-w-0">
              <div class="flex items-start justify-between gap-2">
                <div class="font-extrabold text-slate-900 leading-7
                            text-[14px] sm:text-[16px] md:text-[18px]">
                  {{ c.title }}
                </div>

                <span
                  *ngIf="c.tag"
                  class="shrink-0 rounded-full px-3 py-1 text-[11px] sm:text-[12px] font-extrabold
                         bg-emerald-500/10 border border-emerald-500/15 text-slate-900"
                >
                  {{ c.tag }}
                </span>
              </div>

              <p *ngIf="c.desc" class="mt-2 text-slate-800/80 font-semibold leading-7
                                      text-[13px] sm:text-[14px]">
                {{ c.desc }}
              </p>

              <details *ngIf="c.points?.length" class="mt-3 group">
                <summary
                  class="cursor-pointer list-none inline-flex items-center gap-2
                         rounded-2xl px-3 py-2 bg-white/70 border border-black/10
                         text-slate-900 font-extrabold text-[12px] sm:text-[13px]"
                >
                  <i class="pi pi-angle-down text-slate-600 transition-transform group-open:rotate-180"></i>
                  عرض النقاط ({{ c.points?.length || 0 }})
                </summary>

                <ul class="mt-3 space-y-2 text-slate-800/85 font-semibold leading-7 text-[13px] sm:text-[14px]">
                  <li *ngFor="let p of c.points" class="flex gap-2">
                    <span class="mt-2 w-2 h-2 rounded-full bg-sky-500/60 shrink-0"></span>
                    <span class="min-w-0">{{ p }}</span>
                  </li>
                </ul>
              </details>
            </div>
          </div>
        </article>
      </div>
    </section>

    <!-- PLACES -->
    <section
      *ngIf="sec.kind === 'places'"
      class="rounded-3xl bg-white border border-black/5 shadow-sm
             p-4 sm:p-5 md:p-6"
    >
      <div class="flex flex-col md:flex-row md:items-start md:justify-between gap-3">
        <div class="min-w-0">
          <h2 class="m-0 font-extrabold text-slate-900 text-[clamp(16px,3.5vw,22px)]">
            {{ sec.title }}
          </h2>
          <p *ngIf="sec.desc" class="mt-2 mb-0 text-slate-800/80 leading-7 sm:leading-8 font-semibold
                                    text-[13px] sm:text-[14px] md:text-[16px]">
            {{ sec.desc }}
          </p>
        </div>

        <span class="inline-flex items-center gap-2 rounded-full px-3 py-2
                     bg-slate-900/[0.03] border border-black/5 text-slate-800 font-extrabold
                     text-[12px] sm:text-[13px] w-fit">
          <i class="pi pi-map text-slate-600"></i>
          أماكن
        </span>
      </div>

      <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-3">
        <article *ngFor="let p of sec.items" class="rounded-3xl border border-black/5 bg-slate-900/[0.02] p-4 sm:p-5">
          <div class="flex items-start justify-between gap-2">
            <div class="font-extrabold text-slate-900 leading-7 text-[14px] sm:text-[16px] md:text-[18px] min-w-0">
              {{ p.name }}
            </div>

            <span
              *ngIf="p.tag"
              class="shrink-0 rounded-full px-3 py-1 text-[11px] sm:text-[12px] font-extrabold
                     bg-amber-500/10 border border-amber-500/15 text-slate-900"
            >
              {{ p.tag }}
            </span>
          </div>

          <div class="mt-2 space-y-1 text-slate-800/80 font-semibold leading-7 text-[13px] sm:text-[14px]">
            <div *ngIf="p.city" class="flex gap-2">
              <i class="pi pi-map-marker text-emerald-700 mt-1"></i>
              <span class="min-w-0">{{ p.city }}</span>
            </div>
            <div *ngIf="p.address" class="flex gap-2">
              <i class="pi pi-home text-emerald-700 mt-1"></i>
              <span class="min-w-0">{{ p.address }}</span>
            </div>
            <div *ngIf="p.phone" class="flex gap-2">
              <i class="pi pi-phone text-emerald-700 mt-1"></i>
              <span class="min-w-0 break-words">{{ p.phone }}</span>
            </div>
            <div *ngIf="p.email" class="flex gap-2">
              <i class="pi pi-envelope text-emerald-700 mt-1"></i>
              <span class="min-w-0 break-all">{{ p.email }}</span>
            </div>

            <div *ngIf="p.website" class="pt-2 space-y-2">
              <div class="flex gap-2 min-w-0">
                <i class="pi pi-link text-emerald-700 mt-1"></i>
                <span class="min-w-0 break-all text-slate-800/70">{{ p.website }}</span>
              </div>

              <button
                class="w-full sm:w-auto inline-flex items-center justify-center gap-2
                       rounded-2xl px-3 py-2 bg-white border border-black/10
                       font-extrabold text-slate-900 hover:bg-slate-50"
                (click)="open(p.website!)"
              >
                فتح الموقع
                <i class="pi pi-external-link"></i>
              </button>
            </div>
          </div>

          <details *ngIf="p.notes?.length" class="mt-3 group">
            <summary
              class="cursor-pointer list-none inline-flex items-center gap-2
                     rounded-2xl px-3 py-2 bg-white/70 border border-black/10
                     text-slate-900 font-extrabold text-[12px] sm:text-[13px]"
            >
              <i class="pi pi-angle-down text-slate-600 transition-transform group-open:rotate-180"></i>
              ملاحظات ({{ p.notes?.length || 0 }})
            </summary>

            <ul class="mt-3 space-y-2 text-slate-800/85 font-semibold leading-7 text-[13px] sm:text-[14px]">
              <li *ngFor="let n of p.notes" class="flex gap-2">
                <span class="mt-2 w-2 h-2 rounded-full bg-amber-500/60 shrink-0"></span>
                <span class="min-w-0">{{ n }}</span>
              </li>
            </ul>
          </details>
        </article>
      </div>
    </section>

    <!-- LINKS -->
    <section
      *ngIf="sec.kind === 'links'"
      class="rounded-3xl bg-white border border-black/5 shadow-sm
             p-4 sm:p-5 md:p-6"
    >
      <div class="flex flex-col md:flex-row md:items-start md:justify-between gap-3">
        <div class="min-w-0">
          <h2 class="m-0 font-extrabold text-slate-900 text-[clamp(16px,3.5vw,22px)]">
            {{ sec.title }}
          </h2>
          <p *ngIf="sec.desc" class="mt-2 mb-0 text-slate-800/80 leading-7 sm:leading-8 font-semibold
                                    text-[13px] sm:text-[14px] md:text-[16px]">
            {{ sec.desc }}
          </p>
        </div>

        <span class="inline-flex items-center gap-2 rounded-full px-3 py-2
                     bg-slate-900/[0.03] border border-black/5 text-slate-800 font-extrabold
                     text-[12px] sm:text-[13px] w-fit">
          <i class="pi pi-external-link text-slate-600"></i>
          روابط
        </span>
      </div>

      <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-3">
        <button
          *ngFor="let l of sec.items"
          class="text-right rounded-3xl border border-black/5 bg-slate-900/[0.02]
                 p-4 sm:p-5 hover:-translate-y-0.5 transition-all"
          (click)="open(l.url)"
        >
          <div class="flex items-start gap-3">
            <div class="w-10 h-10 sm:w-11 sm:h-11 rounded-2xl grid place-items-center bg-white border border-black/10 shrink-0">
              <i class="pi pi-external-link text-sky-700"></i>
            </div>

            <div class="w-full min-w-0">
              <div class="font-extrabold text-slate-900 leading-7 text-[14px] sm:text-[16px]">
                {{ l.title }}
              </div>
              <div class="mt-1 text-slate-800/70 font-semibold break-all text-[12px] sm:text-[13px]">
                {{ l.url }}
              </div>
              <div *ngIf="l.note" class="mt-2 text-slate-800/80 font-semibold text-[13px] sm:text-[14px]">
                {{ l.note }}
              </div>

              <div class="mt-3 inline-flex items-center gap-2 rounded-2xl px-3 py-2
                          bg-white/70 border border-black/10 text-slate-900 font-extrabold
                          text-[12px] sm:text-[13px]">
                فتح الرابط
                <i class="pi pi-arrow-up-left text-slate-600"></i>
              </div>
            </div>
          </div>
        </button>
      </div>
    </section>

  </ng-container>
</section>
